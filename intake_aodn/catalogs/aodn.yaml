metadata:
  version: 1
  parameters:
    refs_bucket:
      type: str
      description: The S3 bucket where the reference index is stored
      default: imos-data-pixeldrill-refs
sources:
  SST_L3S_1d_ngt:
    driver: intake_aodn.drivers.RefZarrStackSource
    description: 'IMOS - SRS - SST - L3S - Single Sensor - 1 day - night time - Australia'    
    metadata:
      permalink: https://catalogue-imos.aodn.org.au/geonetwork/srv/eng/catalog.search#/metadata/aaad092c-c3af-42e6-87e0-bdaef945f522
    parameters:
      startdt:
        description: Start date of request
        type: datetime  
        min: "1992-03-21" 
        max: "2021-06-30" 
        default: "2021-06-01"
      enddt:
        description: End date of request
        type: datetime  
        min: "1992-03-22"  
        max: "2021-06-30" 
        default: "2021-06-30"
      geom:
        description: Geometry in Well Known Text format to subset query to
        type: str  
        default: 'POLYGON ((114. -34., 114. -31., 116. -31., 116. -34., 114. -34.))'
    args:
      urlpath: 'zip://*.json::simplecache::s3://{{refs_bucket}}/IMOS/SRS/SST/ghrsst/L3S-1d/ngt/agg_monthly/references.zip'
      startdt: '{{startdt}}'
      enddt: '{{enddt}}'
      geom: '{{geom}}'
      rename_fields:
        lon: longitude
        lat: latitude
      storage_options:
        simple_templates: True
        target_options:
          profile: default
        target_protocol: s3
        remote_options:
          anon: true
        remote_protocol: s3
