metadata:
  version: 1
  parameters:
    refs_url:
      type: str
      description: The URL where the reference index zipfile is located
      default: https://github.com/IOMRC/intake-aodn/raw/main/intake_aodn/catalogs/aodn_refs.zip #imos-data-pixeldrill-refs
sources:
  SST_L3S_1d_ngt:
    driver: intake_aodn.drivers.RefZarrStackSource
    description: 'IMOS - SRS - SST - L3S - Single Sensor - 1 day - night time - Australia'    
    metadata:
      permalink: https://catalogue-imos.aodn.org.au/geonetwork/srv/eng/catalog.search#/metadata/aaad092c-c3af-42e6-87e0-bdaef945f522
    parameters:
      startdt:
        description: Start date of request
        type: datetime  
        min: "1992-03-21" 
        max: "2021-06-30" 
        default: "2021-06-01"
      enddt:
        description: End date of request
        type: datetime  
        min: "1992-03-22"  
        max: "2021-06-30" 
        default: "2021-06-30"
      geom:
        description: Geometry in Well Known Text format to subset query to
        type: str 
    args:
      urlpath: 'simplecache::zip://IMOS/SRS/SST/ghrsst/L3S-1d/ngt/agg_monthly/*.json::{{refs_url}}'
      startdt: '{{startdt}}'
      enddt: '{{enddt}}'
      geom: '{{geom}}'
      cropto: 
        latitude: -32.
        longitude: 115.
        method: 'nearest'
      rename_fields:
        lon: longitude
        lat: latitude
      storage_options:
        simple_templates: True
        target_options: {}
        target_protocol: http
        remote_options:
          anon: true
        remote_protocol: s3
  MODIS_1d_chl_oc3:
    driver: intake_aodn.drivers.RefZarrStackSource
    description: 'IMOS - SRS - MODIS - 01 day - Chlorophyll-a concentration (OC3 model)'    
    metadata:
      permalink: https://catalogue-imos.aodn.org.au/geonetwork/srv/eng/catalog.search#/metadata/d7a14921-8f3f-4522-9a54-e7d1df969c8a
    parameters:
      startdt:
        description: Start date of request
        type: datetime  
        min: "1992-03-21" 
        max: "2021-06-30" 
        default: "2021-06-01"
      enddt:
        description: End date of request
        type: datetime  
        min: "1992-03-22"  
        max: "2021-06-30" 
        default: "2021-06-30"
      geom:
        description: Geometry in Well Known Text format to subset query to
        type: str  
    args:
      urlpath: 'simplecache::zip://IMOS/SRS/OC/gridded/aqua/P1D/agg_monthly/*chl_oc3*.json::{{refs_url}}'
      startdt: '{{startdt}}'
      enddt: '{{enddt}}'
      geom: '{{geom}}'
      cropto: 
        latitude: -32.
        longitude: 115.
        method: 'nearest'
      storage_options:
        simple_templates: True
        target_options: {}
        target_protocol: http
        remote_options:
          anon: true
        remote_protocol: s3
  MODIS_1d_chl_gsm:
    driver: intake_aodn.drivers.RefZarrStackSource
    description: 'IMOS - SRS - MODIS - 01 day - Chlorophyll-a concentration (GSM model)'    
    metadata:
      permalink: https://catalogue-imos.aodn.org.au/geonetwork/srv/eng/catalog.search#/metadata/24055e3a-94e5-40bb-b97f-7519f0482d6a
    parameters:
      startdt:
        description: Start date of request
        type: datetime  
        min: "1992-03-21" 
        max: "2021-06-30" 
        default: "2021-06-01"
      enddt:
        description: End date of request
        type: datetime  
        min: "1992-03-22"  
        max: "2021-06-30" 
        default: "2021-06-30"
      geom:
        description: Geometry in Well Known Text format to subset query to
        type: str 
    args:
      urlpath: 'simplecache::zip://IMOS/SRS/OC/gridded/aqua/P1D/agg_monthly/*chl_gsm*.json::{{refs_url}}'
      startdt: '{{startdt}}'
      enddt: '{{enddt}}'
      geom: '{{geom}}'
      cropto: 
        latitude: -32.
        longitude: 115.
        method: 'nearest'
      storage_options:
        simple_templates: True
        target_options: {}
        target_protocol: http
        remote_options:
          anon: true
        remote_protocol: s3
  MODIS_1d_K_490:
    driver: intake_aodn.drivers.RefZarrStackSource
    description: 'IMOS - SRS - MODIS - 01 day - Light Attenuation Coefficient at 490 nm'    
    metadata:
      permalink: https://catalogue-imos.aodn.org.au/geonetwork/srv/eng/catalog.search#/metadata/24055e3a-94e5-40bb-b97f-7519f0482d6a
    parameters:
      startdt:
        description: Start date of request
        type: datetime  
        min: "1992-03-21" 
        max: "2021-06-30" 
        default: "2021-06-01"
      enddt:
        description: End date of request
        type: datetime  
        min: "1992-03-22"  
        max: "2021-06-30" 
        default: "2021-06-30"
      geom:
        description: Geometry in Well Known Text format to subset query to
        type: str 
    args:
      urlpath: 'simplecache::zip://IMOS/SRS/OC/gridded/aqua/P1D/agg_monthly/*K_490*.json::{{refs_url}}'
      startdt: '{{startdt}}'
      enddt: '{{enddt}}'
      geom: '{{geom}}'
      cropto: 
        latitude: -32.
        longitude: 115.
        method: 'nearest'
      storage_options:
        simple_templates: True
        target_options: {}
        target_protocol: http
        remote_options:
          anon: true
        remote_protocol: s3
